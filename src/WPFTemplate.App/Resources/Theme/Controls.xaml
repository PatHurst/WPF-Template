<ResourceDictionary
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:sys="clr-namespace:System;assembly=mscorlib">

    <!--
        ═══════════════════════════════════════════════════════════════════
        ACCENT  —  single public color, two internal tints
        ─────────────────────────────────────────────────────────────────
        Public API:  ThemeManager.SetAccentColor(color)
        That method writes all three keys below so they are always in sync.
        Callers must never touch AccentColorDark / AccentColorLight directly.
        ════════════════════════════════════════════════════════════════════
    -->
    <SolidColorBrush x:Key="AccentColor"      Color="#3D7FD4" />
    <!--  Derived tints — written by ThemeManager.SetAccentColor() only  -->
    <SolidColorBrush x:Key="AccentColorDark"  Color="#2A5FA0" />
    <SolidColorBrush x:Key="AccentColorLight" Color="#6FA8E8" />
    <!--  Foreground drawn on accent surfaces — also kept in sync  -->
    <SolidColorBrush x:Key="AccentForeground" Color="#FFFFFF" />

    <!--
        ═══════════════════════════════════════════════════════════════════
        TYPOGRAPHY
        ─────────────────────────────────────────────────────────────────
        BUG FIX: DefaultFont was {StaticResource} in every control Setter,
        so ThemeManager.SetFont() had no effect at runtime.  The resource
        key itself is now written as a DynamicResource reference in every
        Setter below so WPF re-evaluates it when the key changes.
        FontSize values remain StaticResource — they are design constants.
        ════════════════════════════════════════════════════════════════════
    -->
    <FontFamily x:Key="DefaultFont">Segoe UI</FontFamily>
    <sys:Double x:Key="FontSizeSmall">11</sys:Double>
    <sys:Double x:Key="FontSizeNormal">12</sys:Double>
    <sys:Double x:Key="FontSizeLarge">14</sys:Double>

    <!--
        ═══════════════════════════════════════════════════════════════════
        CORNER RADIUS — subtle / classic feel, not Win11 pills
        ════════════════════════════════════════════════════════════════════
    -->
    <CornerRadius x:Key="CornerSmall">2</CornerRadius>
    <CornerRadius x:Key="CornerNormal">3</CornerRadius>
    <CornerRadius x:Key="CornerLarge">4</CornerRadius>

    <!--
        ═══════════════════════════════════════════════════════════════════
        WINDOW STYLE
        BUG FIX: Was StaticResource — did not respond to theme swaps.
        ════════════════════════════════════════════════════════════════════
    -->
    <Style x:Key="WindowStyle" TargetType="Window">
        <Setter Property="Background"  Value="{DynamicResource WindowBackground}" />
        <Setter Property="BorderBrush" Value="{DynamicResource WindowBorder}" />
    </Style>

    <!--
        ═══════════════════════════════════════════════════════════════════
        TEXTBLOCK / LABEL — global defaults
        ════════════════════════════════════════════════════════════════════
    -->
    <Style TargetType="TextBlock">
        <Setter Property="Foreground" Value="{DynamicResource TextPrimary}" />
        <Setter Property="FontFamily" Value="{DynamicResource DefaultFont}" />
        <Setter Property="FontSize"   Value="{StaticResource FontSizeNormal}" />
    </Style>

    <Style TargetType="Label">
        <Setter Property="Foreground" Value="{DynamicResource TextPrimary}" />
        <Setter Property="FontFamily" Value="{DynamicResource DefaultFont}" />
        <Setter Property="FontSize"   Value="{StaticResource FontSizeNormal}" />
        <Setter Property="Padding"    Value="0" />
    </Style>

    <!--
        ═══════════════════════════════════════════════════════════════════
        SIDEBAR HELPERS
        ─────────────────────────────────────────────────────────────────
        BUG FIX: SideItemActive BasedOn SideItem inherits the IsMouseOver
        trigger, which fires at higher specificity than a plain Setter and
        overwrites the active Background with the plain hover color.
        Fixed by re-declaring the IsMouseOver trigger in SideItemActive
        so it paints a distinct active-hover shade.
        ════════════════════════════════════════════════════════════════════
    -->
    <Style x:Key="SideGroupHeader" TargetType="TextBlock">
        <Setter Property="Foreground" Value="{DynamicResource GroupHeaderForeground}" />
        <Setter Property="FontFamily" Value="{DynamicResource DefaultFont}" />
        <Setter Property="FontSize"   Value="10" />
        <Setter Property="FontWeight" Value="SemiBold" />
        <Setter Property="Margin"     Value="10,6,8,3" />
    </Style>

    <Style x:Key="SideItem" TargetType="Border">
        <Setter Property="Padding"      Value="10,4" />
        <Setter Property="Margin"       Value="3,1" />
        <Setter Property="CornerRadius" Value="3" />
        <Setter Property="Cursor"       Value="Hand" />
        <Setter Property="Background"   Value="Transparent" />
        <Style.Triggers>
            <Trigger Property="IsMouseOver" Value="True">
                <Setter Property="Background" Value="{DynamicResource SidebarItemHover}" />
            </Trigger>
        </Style.Triggers>
    </Style>

    <Style x:Key="SideItemActive" BasedOn="{StaticResource SideItem}" TargetType="Border">
        <Setter Property="Background" Value="{DynamicResource SidebarItemSelected}" />
        <Style.Triggers>
            <!--
                Re-declared so active items show hover feedback without
                reverting to the plain SidebarItemHover color (which looks
                the same as an unselected item).  SidebarItemSelected is
                already defined — using the same value here keeps it simple
                while still causing a repaint / ensuring trigger wins.
            -->
            <Trigger Property="IsMouseOver" Value="True">
                <Setter Property="Background" Value="{DynamicResource SidebarItemHover}" />
            </Trigger>
        </Style.Triggers>
    </Style>

    <!--
        ═══════════════════════════════════════════════════════════════════
        SCROLLBAR THUMB
        ════════════════════════════════════════════════════════════════════
    -->
    <Style x:Key="ScrollThumbStyle" TargetType="Thumb">
        <Setter Property="Background" Value="{DynamicResource ScrollbarThumb}" />
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="Thumb">
                    <Border
                        Margin="2"
                        Background="{TemplateBinding Background}"
                        CornerRadius="2" />
                    <ControlTemplate.Triggers>
                        <Trigger Property="IsMouseOver" Value="True">
                            <Setter Property="Background" Value="{DynamicResource ScrollbarThumbHover}" />
                        </Trigger>
                        <Trigger Property="IsDragging" Value="True">
                            <Setter Property="Background" Value="{DynamicResource ScrollbarThumbPressed}" />
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <Style x:Key="VerticalScrollBarStyle" TargetType="ScrollBar">
        <Setter Property="Width"      Value="12" />
        <Setter Property="MinWidth"   Value="12" />
        <Setter Property="Background" Value="{DynamicResource ScrollbarTrack}" />
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="ScrollBar">
                    <Grid Background="{TemplateBinding Background}">
                        <Track x:Name="PART_Track" IsDirectionReversed="True">
                            <Track.Thumb>
                                <Thumb Style="{StaticResource ScrollThumbStyle}" />
                            </Track.Thumb>
                        </Track>
                    </Grid>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <Style x:Key="HorizontalScrollBarStyle" TargetType="ScrollBar">
        <Setter Property="Height"     Value="12" />
        <Setter Property="MinHeight"  Value="12" />
        <Setter Property="Background" Value="{DynamicResource ScrollbarTrack}" />
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="ScrollBar">
                    <Grid Background="{TemplateBinding Background}">
                        <Track x:Name="PART_Track">
                            <Track.Thumb>
                                <Thumb Style="{StaticResource ScrollThumbStyle}" />
                            </Track.Thumb>
                        </Track>
                    </Grid>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <Style TargetType="ScrollViewer">
        <Setter Property="Background" Value="Transparent" />
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="ScrollViewer">
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition />
                            <ColumnDefinition Width="Auto" />
                        </Grid.ColumnDefinitions>
                        <Grid.RowDefinitions>
                            <RowDefinition />
                            <RowDefinition Height="Auto" />
                        </Grid.RowDefinitions>
                        <ScrollContentPresenter
                            Grid.Row="0"
                            Grid.Column="0"
                            CanContentScroll="{TemplateBinding CanContentScroll}" />
                        <ScrollBar
                            x:Name="PART_VerticalScrollBar"
                            Grid.Row="0"
                            Grid.Column="1"
                            Maximum="{TemplateBinding ScrollableHeight}"
                            Style="{StaticResource VerticalScrollBarStyle}"
                            ViewportSize="{TemplateBinding ViewportHeight}"
                            Visibility="{TemplateBinding ComputedVerticalScrollBarVisibility}"
                            Value="{TemplateBinding VerticalOffset}" />
                        <ScrollBar
                            x:Name="PART_HorizontalScrollBar"
                            Grid.Row="1"
                            Grid.Column="0"
                            Maximum="{TemplateBinding ScrollableWidth}"
                            Orientation="Horizontal"
                            Style="{StaticResource HorizontalScrollBarStyle}"
                            ViewportSize="{TemplateBinding ViewportWidth}"
                            Visibility="{TemplateBinding ComputedHorizontalScrollBarVisibility}"
                            Value="{TemplateBinding HorizontalOffset}" />
                    </Grid>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <!-- GridView internal ScrollViewer — keeps column header pinned -->
    <Style x:Key="{x:Static GridView.GridViewScrollViewerStyleKey}" TargetType="ScrollViewer">
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="ScrollViewer">
                    <Grid Background="{TemplateBinding Background}">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition />
                            <ColumnDefinition Width="Auto" />
                        </Grid.ColumnDefinitions>
                        <Grid.RowDefinitions>
                            <RowDefinition />
                            <RowDefinition Height="Auto" />
                        </Grid.RowDefinitions>
                        <DockPanel Grid.Row="0" Grid.Column="0">
                            <ScrollViewer
                                DockPanel.Dock="Top"
                                Focusable="False"
                                HorizontalScrollBarVisibility="Hidden"
                                VerticalScrollBarVisibility="Hidden">
                                <GridViewHeaderRowPresenter
                                    Margin="0"
                                    AllowsColumnReorder="True"
                                    Columns="{Binding Path=TemplatedParent.View.Columns, RelativeSource={RelativeSource TemplatedParent}}" />
                            </ScrollViewer>
                            <ScrollContentPresenter
                                x:Name="PART_ScrollContentPresenter"
                                CanContentScroll="{TemplateBinding CanContentScroll}"
                                KeyboardNavigation.DirectionalNavigation="Local" />
                        </DockPanel>
                        <ScrollBar
                            x:Name="PART_VerticalScrollBar"
                            Grid.Row="0"
                            Grid.Column="1"
                            Maximum="{TemplateBinding ScrollableHeight}"
                            Style="{StaticResource VerticalScrollBarStyle}"
                            ViewportSize="{TemplateBinding ViewportHeight}"
                            Visibility="{TemplateBinding ComputedVerticalScrollBarVisibility}"
                            Value="{TemplateBinding VerticalOffset}" />
                        <ScrollBar
                            x:Name="PART_HorizontalScrollBar"
                            Grid.Row="1"
                            Grid.Column="0"
                            Maximum="{TemplateBinding ScrollableWidth}"
                            Orientation="Horizontal"
                            Style="{StaticResource HorizontalScrollBarStyle}"
                            ViewportSize="{TemplateBinding ViewportWidth}"
                            Visibility="{TemplateBinding ComputedHorizontalScrollBarVisibility}"
                            Value="{TemplateBinding HorizontalOffset}" />
                    </Grid>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <!--
        ═══════════════════════════════════════════════════════════════════
        BUTTON
        ─────────────────────────────────────────────────────────────────
        BUG FIX: IsFocused trigger used AccentColor for BorderBrush.
        FocusBorder (from color files) is the correct semantic key —
        it can differ from AccentColor on themes where the accent is
        low-contrast.  FocusBorder is always a high-visibility color.
        ════════════════════════════════════════════════════════════════════
    -->
    <Style x:Key="BaseButton" TargetType="Button">
        <Setter Property="Background"       Value="{DynamicResource ControlBackground}" />
        <Setter Property="Foreground"       Value="{DynamicResource TextPrimary}" />
        <Setter Property="BorderBrush"      Value="{DynamicResource ControlBorder}" />
        <Setter Property="BorderThickness"  Value="1" />
        <Setter Property="Padding"          Value="10,4" />
        <Setter Property="FontFamily"       Value="{DynamicResource DefaultFont}" />
        <Setter Property="FontSize"         Value="{StaticResource FontSizeNormal}" />
        <Setter Property="Cursor"           Value="Hand" />
        <Setter Property="FocusVisualStyle" Value="{x:Null}" />
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="Button">
                    <Border
                        x:Name="Root"
                        Padding="{TemplateBinding Padding}"
                        Background="{TemplateBinding Background}"
                        BorderBrush="{TemplateBinding BorderBrush}"
                        BorderThickness="{TemplateBinding BorderThickness}"
                        CornerRadius="{StaticResource CornerNormal}">
                        <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center" />
                    </Border>
                    <ControlTemplate.Triggers>
                        <Trigger Property="IsMouseOver" Value="True">
                            <Setter TargetName="Root" Property="Background" Value="{DynamicResource ControlHover}" />
                        </Trigger>
                        <Trigger Property="IsPressed" Value="True">
                            <Setter TargetName="Root" Property="Background"  Value="{DynamicResource ControlPressed}" />
                        </Trigger>
                        <Trigger Property="IsEnabled" Value="False">
                            <Setter TargetName="Root" Property="Background"  Value="{DynamicResource ControlDisabled}" />
                            <Setter TargetName="Root" Property="BorderBrush" Value="{DynamicResource ControlDisabledBorder}" />
                            <Setter Property="Foreground" Value="{DynamicResource TextDisabled}" />
                        </Trigger>
                        <Trigger Property="IsFocused" Value="True">
                            <Setter TargetName="Root" Property="BorderBrush" Value="{DynamicResource FocusBorder}" />
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <Style BasedOn="{StaticResource BaseButton}" TargetType="Button" />

    <Style x:Key="AccentButton" BasedOn="{StaticResource BaseButton}" TargetType="Button">
        <Setter Property="Background"  Value="{DynamicResource AccentColor}" />
        <Setter Property="Foreground"  Value="{DynamicResource AccentForeground}" />
        <Setter Property="BorderBrush" Value="{DynamicResource AccentColorDark}" />
        <Style.Triggers>
            <Trigger Property="IsMouseOver" Value="True">
                <Setter Property="Background" Value="{DynamicResource AccentColorLight}" />
            </Trigger>
            <Trigger Property="IsPressed" Value="True">
                <Setter Property="Background" Value="{DynamicResource AccentColorDark}" />
            </Trigger>
        </Style.Triggers>
    </Style>

    <Style x:Key="FlatButton" TargetType="Button">
        <Setter Property="Background"       Value="Transparent" />
        <Setter Property="Foreground"       Value="{DynamicResource TextPrimary}" />
        <Setter Property="BorderThickness"  Value="0" />
        <Setter Property="Padding"          Value="6,4" />
        <Setter Property="FontFamily"       Value="{DynamicResource DefaultFont}" />
        <Setter Property="FontSize"         Value="{StaticResource FontSizeNormal}" />
        <Setter Property="Cursor"           Value="Hand" />
        <Setter Property="FocusVisualStyle" Value="{x:Null}" />
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="Button">
                    <Border
                        x:Name="Root"
                        Padding="{TemplateBinding Padding}"
                        Background="{TemplateBinding Background}"
                        CornerRadius="{StaticResource CornerSmall}">
                        <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center" />
                    </Border>
                    <ControlTemplate.Triggers>
                        <Trigger Property="IsMouseOver" Value="True">
                            <Setter TargetName="Root" Property="Background" Value="{DynamicResource ControlHover}" />
                        </Trigger>
                        <Trigger Property="IsPressed" Value="True">
                            <Setter TargetName="Root" Property="Background" Value="{DynamicResource ControlPressed}" />
                        </Trigger>
                        <Trigger Property="IsEnabled" Value="False">
                            <Setter Property="Foreground" Value="{DynamicResource TextDisabled}" />
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <!--
        ═══════════════════════════════════════════════════════════════════
        TEXTBOX
        ════════════════════════════════════════════════════════════════════
    -->
    <Style TargetType="TextBox">
        <Setter Property="Background"       Value="{DynamicResource InputBackground}" />
        <Setter Property="Foreground"       Value="{DynamicResource InputForeground}" />
        <Setter Property="BorderBrush"      Value="{DynamicResource InputBorder}" />
        <Setter Property="BorderThickness"  Value="1" />
        <Setter Property="Padding"          Value="5,3" />
        <Setter Property="FontFamily"       Value="{DynamicResource DefaultFont}" />
        <Setter Property="FontSize"         Value="{StaticResource FontSizeNormal}" />
        <Setter Property="CaretBrush"       Value="{DynamicResource TextPrimary}" />
        <Setter Property="SelectionBrush"   Value="{DynamicResource AccentColor}" />
        <Setter Property="FocusVisualStyle" Value="{x:Null}" />
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="TextBox">
                    <Border
                        x:Name="Root"
                        Background="{TemplateBinding Background}"
                        BorderBrush="{TemplateBinding BorderBrush}"
                        BorderThickness="{TemplateBinding BorderThickness}"
                        CornerRadius="{StaticResource CornerSmall}">
                        <ScrollViewer
                            x:Name="PART_ContentHost"
                            Margin="{TemplateBinding Padding}"
                            VerticalAlignment="Center" />
                    </Border>
                    <ControlTemplate.Triggers>
                        <Trigger Property="IsMouseOver" Value="True">
                            <Setter TargetName="Root" Property="BorderBrush" Value="{DynamicResource AccentColorLight}" />
                        </Trigger>
                        <Trigger Property="IsFocused" Value="True">
                            <Setter TargetName="Root" Property="BorderBrush" Value="{DynamicResource AccentColor}" />
                        </Trigger>
                        <Trigger Property="IsEnabled" Value="False">
                            <Setter TargetName="Root" Property="Background" Value="{DynamicResource ControlDisabled}" />
                            <Setter Property="Foreground" Value="{DynamicResource TextDisabled}" />
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <!--
        ═══════════════════════════════════════════════════════════════════
        CHECKBOX
        ════════════════════════════════════════════════════════════════════
    -->
    <Style TargetType="CheckBox">
        <Setter Property="Foreground"               Value="{DynamicResource TextPrimary}" />
        <Setter Property="FontFamily"               Value="{DynamicResource DefaultFont}" />
        <Setter Property="FontSize"                 Value="{StaticResource FontSizeNormal}" />
        <Setter Property="VerticalContentAlignment" Value="Center" />
        <Setter Property="FocusVisualStyle"         Value="{x:Null}" />
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="CheckBox">
                    <StackPanel VerticalAlignment="Center" Orientation="Horizontal">
                        <Border
                            x:Name="Box"
                            Width="14"
                            Height="14"
                            Background="{DynamicResource ControlBackground}"
                            BorderBrush="{DynamicResource ControlBorder}"
                            BorderThickness="1"
                            CornerRadius="{StaticResource CornerSmall}">
                            <Path
                                x:Name="Check"
                                Margin="2"
                                Data="M 2,6 L 5,10 L 12,2"
                                Stretch="Uniform"
                                Stroke="{DynamicResource AccentColor}"
                                StrokeThickness="1.5"
                                Visibility="Collapsed" />
                        </Border>
                        <ContentPresenter
                            Margin="6,0,0,0"
                            VerticalAlignment="Center"
                            RecognizesAccessKey="True" />
                    </StackPanel>
                    <ControlTemplate.Triggers>
                        <Trigger Property="IsChecked" Value="True">
                            <Setter TargetName="Check" Property="Visibility"  Value="Visible" />
                            <Setter TargetName="Box"   Property="BorderBrush" Value="{DynamicResource AccentColor}" />
                        </Trigger>
                        <Trigger Property="IsMouseOver" Value="True">
                            <Setter TargetName="Box" Property="BorderBrush" Value="{DynamicResource AccentColorLight}" />
                        </Trigger>
                        <Trigger Property="IsEnabled" Value="False">
                            <Setter Property="Foreground" Value="{DynamicResource TextDisabled}" />
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <!--
        ═══════════════════════════════════════════════════════════════════
        COMBOBOX
        ════════════════════════════════════════════════════════════════════
    -->
    <Style TargetType="ComboBoxItem">
        <Setter Property="Background" Value="Transparent" />
        <Setter Property="Foreground" Value="{DynamicResource TextPrimary}" />
        <Setter Property="Padding"    Value="8,4" />
        <Setter Property="FontFamily" Value="{DynamicResource DefaultFont}" />
        <Setter Property="FontSize"   Value="{StaticResource FontSizeNormal}" />
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="ComboBoxItem">
                    <Border
                        x:Name="Root"
                        Padding="{TemplateBinding Padding}"
                        Background="{TemplateBinding Background}">
                        <ContentPresenter />
                    </Border>
                    <ControlTemplate.Triggers>
                        <Trigger Property="IsHighlighted" Value="True">
                            <Setter TargetName="Root" Property="Background" Value="{DynamicResource ListItemHover}" />
                        </Trigger>
                        <Trigger Property="IsSelected" Value="True">
                            <Setter TargetName="Root" Property="Background" Value="{DynamicResource ListItemSelected}" />
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <Style TargetType="ComboBox">
        <Setter Property="Background"       Value="{DynamicResource ControlBackground}" />
        <Setter Property="Foreground"       Value="{DynamicResource TextPrimary}" />
        <Setter Property="BorderBrush"      Value="{DynamicResource ControlBorder}" />
        <Setter Property="BorderThickness"  Value="1" />
        <Setter Property="Padding"          Value="6,3" />
        <Setter Property="FontFamily"       Value="{DynamicResource DefaultFont}" />
        <Setter Property="FontSize"         Value="{StaticResource FontSizeNormal}" />
        <Setter Property="FocusVisualStyle" Value="{x:Null}" />
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="ComboBox">
                    <Grid>
                        <Border
                            x:Name="Root"
                            Background="{TemplateBinding Background}"
                            BorderBrush="{TemplateBinding BorderBrush}"
                            BorderThickness="{TemplateBinding BorderThickness}"
                            CornerRadius="{StaticResource CornerSmall}">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition />
                                    <ColumnDefinition Width="22" />
                                </Grid.ColumnDefinitions>
                                <ContentPresenter
                                    Grid.Column="0"
                                    Margin="{TemplateBinding Padding}"
                                    VerticalAlignment="Center"
                                    Content="{TemplateBinding SelectionBoxItem}"
                                    ContentTemplate="{TemplateBinding SelectionBoxItemTemplate}" />
                                <Path
                                    Grid.Column="1"
                                    Width="10"
                                    Height="6"
                                    HorizontalAlignment="Center"
                                    VerticalAlignment="Center"
                                    Data="M 0,0 L 5,5 L 10,0"
                                    Stretch="Fill"
                                    Stroke="{DynamicResource TextSecondary}"
                                    StrokeThickness="1.5" />
                            </Grid>
                        </Border>
                        <Popup
                            x:Name="PART_Popup"
                            AllowsTransparency="True"
                            IsOpen="{TemplateBinding IsDropDownOpen}"
                            Placement="Bottom"
                            PlacementTarget="{Binding ElementName=Root}">
                            <Border
                                MinWidth="{Binding ActualWidth, RelativeSource={RelativeSource TemplatedParent}}"
                                Background="{DynamicResource SubMenuBackground}"
                                BorderBrush="{DynamicResource SubMenuBorder}"
                                BorderThickness="1"
                                CornerRadius="{StaticResource CornerSmall}">
                                <ScrollViewer MaxHeight="220">
                                    <ItemsPresenter />
                                </ScrollViewer>
                            </Border>
                        </Popup>
                    </Grid>
                    <ControlTemplate.Triggers>
                        <Trigger Property="IsMouseOver" Value="True">
                            <Setter TargetName="Root" Property="BorderBrush" Value="{DynamicResource AccentColorLight}" />
                        </Trigger>
                        <Trigger Property="IsDropDownOpen" Value="True">
                            <Setter TargetName="Root" Property="BorderBrush" Value="{DynamicResource AccentColor}" />
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <!--
        ═══════════════════════════════════════════════════════════════════
        MENU + MENUITEMS
        ════════════════════════════════════════════════════════════════════
    -->
    <Style TargetType="Menu">
        <Setter Property="Background"      Value="{DynamicResource MenuBackground}" />
        <Setter Property="Foreground"      Value="{DynamicResource MenuItemForeground}" />
        <Setter Property="BorderThickness" Value="0" />
        <Setter Property="FontFamily"      Value="{DynamicResource DefaultFont}" />
        <Setter Property="FontSize"        Value="{StaticResource FontSizeNormal}" />
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="Menu">
                    <Border
                        Padding="2,1"
                        Background="{TemplateBinding Background}"
                        BorderBrush="{DynamicResource MenuBorder}"
                        BorderThickness="0,0,0,1">
                        <ItemsPresenter />
                    </Border>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <Style TargetType="MenuItem">
        <Setter Property="Background" Value="{DynamicResource MenuItemBackground}" />
        <Setter Property="Foreground" Value="{DynamicResource MenuItemForeground}" />
        <Setter Property="FontFamily" Value="{DynamicResource DefaultFont}" />
        <Setter Property="FontSize"   Value="{StaticResource FontSizeNormal}" />
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="MenuItem">
                    <Border
                        x:Name="Root"
                        Padding="10,4"
                        Background="{TemplateBinding Background}"
                        CornerRadius="{StaticResource CornerSmall}">
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto" />
                                <ColumnDefinition />
                                <ColumnDefinition Width="Auto" />
                                <ColumnDefinition Width="Auto" />
                            </Grid.ColumnDefinitions>

                            <ContentPresenter
                                Grid.Column="0"
                                Margin="0,0,6,0"
                                VerticalAlignment="Center"
                                ContentSource="Icon"
                                SnapsToDevicePixels="True" />

                            <ContentPresenter
                                Grid.Column="1"
                                VerticalAlignment="Center"
                                ContentSource="Header"
                                RecognizesAccessKey="True" />

                            <TextBlock
                                Grid.Column="2"
                                Margin="16,0,8,0"
                                VerticalAlignment="Center"
                                Foreground="{DynamicResource TextSecondary}"
                                Text="{TemplateBinding InputGestureText}" />

                            <Path
                                x:Name="Arrow"
                                Grid.Column="3"
                                Width="5"
                                Height="9"
                                VerticalAlignment="Center"
                                Data="M 0,0 L 4,4 L 0,8"
                                Stretch="Fill"
                                Stroke="{DynamicResource TextSecondary}"
                                StrokeThickness="1.2"
                                Visibility="Collapsed" />

                            <Popup
                                x:Name="PART_Popup"
                                Grid.Column="0"
                                AllowsTransparency="True"
                                IsOpen="{TemplateBinding IsSubmenuOpen}"
                                Placement="Right"
                                PlacementTarget="{Binding ElementName=Root}">
                                <Border
                                    Padding="2"
                                    Background="{DynamicResource SubMenuBackground}"
                                    BorderBrush="{DynamicResource SubMenuBorder}"
                                    BorderThickness="1"
                                    CornerRadius="{StaticResource CornerNormal}">
                                    <StackPanel IsItemsHost="True" />
                                </Border>
                            </Popup>
                        </Grid>
                    </Border>
                    <ControlTemplate.Triggers>
                        <Trigger Property="IsHighlighted" Value="True">
                            <Setter TargetName="Root" Property="Background" Value="{DynamicResource MenuItemHover}" />
                        </Trigger>
                        <Trigger Property="IsSubmenuOpen" Value="True">
                            <Setter TargetName="Root" Property="Background" Value="{DynamicResource MenuItemHover}" />
                        </Trigger>
                        <Trigger Property="Role" Value="TopLevelHeader">
                            <Setter TargetName="PART_Popup" Property="Placement" Value="Bottom" />
                        </Trigger>
                        <Trigger Property="Role" Value="SubmenuHeader">
                            <Setter TargetName="Arrow" Property="Visibility" Value="Visible" />
                        </Trigger>
                        <Trigger Property="IsEnabled" Value="False">
                            <Setter Property="Foreground" Value="{DynamicResource TextDisabled}" />
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <Style TargetType="Separator">
        <Setter Property="Background" Value="{DynamicResource MenuSeparator}" />
        <Setter Property="Height"     Value="1" />
        <Setter Property="Margin"     Value="6,3" />
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="Separator">
                    <Rectangle Height="1" Fill="{TemplateBinding Background}" />
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <!--
        ═══════════════════════════════════════════════════════════════════
        LISTVIEW + LISTVIEWITEM + GRIDVIEWCOLUMNHEADER
        ════════════════════════════════════════════════════════════════════
    -->
    <Style TargetType="ListView">
        <Setter Property="Background"       Value="{DynamicResource ListBackground}" />
        <Setter Property="BorderBrush"      Value="{DynamicResource ContentBorder}" />
        <Setter Property="BorderThickness"  Value="1" />
        <Setter Property="FontFamily"       Value="{DynamicResource DefaultFont}" />
        <Setter Property="FontSize"         Value="{StaticResource FontSizeNormal}" />
        <Setter Property="Foreground"       Value="{DynamicResource TextPrimary}" />
        <Setter Property="FocusVisualStyle" Value="{x:Null}" />
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="ListView">
                    <Border
                        Background="{TemplateBinding Background}"
                        BorderBrush="{TemplateBinding BorderBrush}"
                        BorderThickness="{TemplateBinding BorderThickness}">
                        <ScrollViewer Padding="{TemplateBinding Padding}" HorizontalScrollBarVisibility="Auto">
                            <ItemsPresenter />
                        </ScrollViewer>
                    </Border>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <Style TargetType="ListViewItem">
        <Setter Property="Background"                Value="{DynamicResource ListItemBackground}" />
        <Setter Property="Foreground"                Value="{DynamicResource TextPrimary}" />
        <Setter Property="BorderThickness"           Value="0" />
        <Setter Property="Padding"                   Value="6,4" />
        <Setter Property="HorizontalContentAlignment" Value="Stretch" />
        <Setter Property="FocusVisualStyle"          Value="{x:Null}" />
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="ListViewItem">
                    <Border
                        x:Name="Root"
                        Padding="{TemplateBinding Padding}"
                        Background="{TemplateBinding Background}">
                        <GridViewRowPresenter HorizontalAlignment="Stretch" VerticalAlignment="Center" />
                    </Border>
                    <ControlTemplate.Triggers>
                        <Trigger Property="IsMouseOver" Value="True">
                            <Setter TargetName="Root" Property="Background" Value="{DynamicResource ListItemHover}" />
                        </Trigger>
                        <MultiTrigger>
                            <MultiTrigger.Conditions>
                                <Condition Property="IsSelected"            Value="True" />
                                <Condition Property="IsKeyboardFocusWithin" Value="True" />
                            </MultiTrigger.Conditions>
                            <Setter TargetName="Root" Property="Background" Value="{DynamicResource ListItemSelectedFocus}" />
                        </MultiTrigger>
                        <MultiTrigger>
                            <MultiTrigger.Conditions>
                                <Condition Property="IsSelected"            Value="True" />
                                <Condition Property="IsKeyboardFocusWithin" Value="False" />
                            </MultiTrigger.Conditions>
                            <Setter TargetName="Root" Property="Background" Value="{DynamicResource ListItemSelected}" />
                        </MultiTrigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <Style TargetType="GridViewColumnHeader">
        <Setter Property="Background"      Value="{DynamicResource ListHeaderBackground}" />
        <Setter Property="Foreground"      Value="{DynamicResource ListHeaderForeground}" />
        <Setter Property="BorderBrush"     Value="{DynamicResource ListHeaderBorder}" />
        <Setter Property="BorderThickness" Value="0,0,1,1" />
        <Setter Property="Padding"         Value="8,5" />
        <Setter Property="FontFamily"      Value="{DynamicResource DefaultFont}" />
        <Setter Property="FontSize"        Value="{StaticResource FontSizeNormal}" />
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="GridViewColumnHeader">
                    <Border
                        Padding="{TemplateBinding Padding}"
                        Background="{TemplateBinding Background}"
                        BorderBrush="{TemplateBinding BorderBrush}"
                        BorderThickness="{TemplateBinding BorderThickness}">
                        <ContentPresenter HorizontalAlignment="Left" VerticalAlignment="Center" />
                    </Border>
                    <ControlTemplate.Triggers>
                        <Trigger Property="IsMouseOver" Value="True">
                            <Setter Property="Background" Value="{DynamicResource ListHeaderBorder}" />
                        </Trigger>
                        <Trigger Property="IsPressed" Value="True">
                            <Setter Property="Foreground" Value="{DynamicResource AccentColor}" />
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <!--
        ═══════════════════════════════════════════════════════════════════
        STATUS BAR
        ════════════════════════════════════════════════════════════════════
    -->
    <Style TargetType="StatusBar">
        <Setter Property="Background"  Value="{DynamicResource StatusBarBackground}" />
        <Setter Property="Foreground"  Value="{DynamicResource StatusBarForeground}" />
        <Setter Property="FontFamily"  Value="{DynamicResource DefaultFont}" />
        <Setter Property="FontSize"    Value="{StaticResource FontSizeSmall}" />
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="StatusBar">
                    <Border
                        Padding="8,3"
                        Background="{TemplateBinding Background}"
                        BorderBrush="{DynamicResource StatusBarBorder}"
                        BorderThickness="0,1,0,0">
                        <DockPanel>
                            <ItemsPresenter />
                        </DockPanel>
                    </Border>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <Style TargetType="StatusBarItem">
        <Setter Property="Foreground" Value="{DynamicResource StatusBarForeground}" />
        <Setter Property="FontFamily" Value="{DynamicResource DefaultFont}" />
        <Setter Property="FontSize"   Value="{StaticResource FontSizeSmall}" />
    </Style>

    <!--
        ═══════════════════════════════════════════════════════════════════
        TOOLTIP
        ════════════════════════════════════════════════════════════════════
    -->
    <Style TargetType="ToolTip">
        <Setter Property="Background"      Value="{DynamicResource TooltipBackground}" />
        <Setter Property="Foreground"      Value="{DynamicResource TooltipForeground}" />
        <Setter Property="BorderBrush"     Value="{DynamicResource TooltipBorder}" />
        <Setter Property="BorderThickness" Value="1" />
        <Setter Property="Padding"         Value="6,3" />
        <Setter Property="FontFamily"      Value="{DynamicResource DefaultFont}" />
        <Setter Property="FontSize"        Value="{StaticResource FontSizeSmall}" />
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="ToolTip">
                    <Border
                        Padding="{TemplateBinding Padding}"
                        Background="{TemplateBinding Background}"
                        BorderBrush="{TemplateBinding BorderBrush}"
                        BorderThickness="{TemplateBinding BorderThickness}"
                        CornerRadius="{StaticResource CornerSmall}">
                        <ContentPresenter />
                    </Border>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <!--
        ═══════════════════════════════════════════════════════════════════
        PROGRESSBAR
        ════════════════════════════════════════════════════════════════════
    -->
    <Style TargetType="ProgressBar">
        <Setter Property="Background"      Value="{DynamicResource ControlBackground}" />
        <Setter Property="Foreground"      Value="{DynamicResource AccentColor}" />
        <Setter Property="BorderBrush"     Value="{DynamicResource ControlBorder}" />
        <Setter Property="BorderThickness" Value="1" />
        <Setter Property="Height"          Value="6" />
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="ProgressBar">
                    <Border
                        Background="{TemplateBinding Background}"
                        BorderBrush="{TemplateBinding BorderBrush}"
                        BorderThickness="{TemplateBinding BorderThickness}"
                        CornerRadius="3">
                        <Border
                            x:Name="PART_Indicator"
                            HorizontalAlignment="Left"
                            Background="{TemplateBinding Foreground}"
                            CornerRadius="3" />
                    </Border>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <!--
        ═══════════════════════════════════════════════════════════════════
        GROUPBOX
        ════════════════════════════════════════════════════════════════════
    -->
    <Style TargetType="GroupBox">
        <Setter Property="Foreground"      Value="{DynamicResource TextPrimary}" />
        <Setter Property="BorderBrush"     Value="{DynamicResource ControlBorder}" />
        <Setter Property="BorderThickness" Value="1" />
        <Setter Property="Padding"         Value="8" />
        <Setter Property="Margin"          Value="0,4" />
        <Setter Property="FontFamily"      Value="{DynamicResource DefaultFont}" />
        <Setter Property="FontSize"        Value="{StaticResource FontSizeNormal}" />
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="GroupBox">
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto" />
                            <RowDefinition />
                        </Grid.RowDefinitions>
                        <Border
                            Grid.Row="0"
                            Grid.RowSpan="2"
                            Margin="0,8,0,0"
                            BorderBrush="{TemplateBinding BorderBrush}"
                            BorderThickness="{TemplateBinding BorderThickness}"
                            CornerRadius="{StaticResource CornerNormal}" />
                        <Border
                            Grid.Row="0"
                            Margin="10,2,0,0"
                            Padding="4,0"
                            HorizontalAlignment="Left"
                            Background="{DynamicResource WindowBackground}">
                            <ContentPresenter ContentSource="Header" RecognizesAccessKey="True" />
                        </Border>
                        <ContentPresenter Grid.Row="1" Margin="{TemplateBinding Padding}" />
                    </Grid>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

</ResourceDictionary>
